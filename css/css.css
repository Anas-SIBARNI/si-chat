
/* ===================================================================
   Messagerie - css.css (propre & optimisé)
   Disposition horizontale : Sidebar | Contacts | Chat | Profil
   Palette sombre conservée
   =================================================================== */

/* --------- Base --------- */
* { box-sizing: border-box; margin: 0; padding: 0; }

:root{
  --sidebar-w: 100px;
  --contacts-w: 260px;
  --profile-w: 300px;

  --header-h: 64px;
  --footer-h: 74px;

  --bg: #0f172a;
  --panel: #1e293b;
  --panel-2: #111827;
  --border: #334155;
  --text: #e5e7eb;
  --muted: #94a3b8;
  --brand: #2563eb;
  --success:#22c55e;
}

html, body { height: 100%; }
body {
  background: var(--bg);
  color: var(--text);
  font: 500 15px/1.45 "Segoe UI", system-ui, -apple-system, Roboto, Arial, sans-serif;
}

/* --------- Grille principale ---------
   IMPORTANT: utilise .app-container dans messagerie.html
--------------------------------------- */
.app-container{
  height: 100vh;
  width: 100%;
  display: grid;
  grid-template-columns: var(--sidebar-w) var(--contacts-w) 1fr var(--profile-w);
  grid-template-rows: 100%;
  overflow: hidden;
}

/* Place chaque panneau explicitement */
.sidebar { grid-column: 1; grid-row: 1; background: var(--panel); border-right: 1px solid var(--border); }
.contacts{ grid-column: 2; grid-row: 1; background: var(--panel); border-right: 1px solid var(--border); }
.chat    { grid-column: 3; grid-row: 1; background: var(--bg); display: grid; grid-template-rows: var(--header-h) 1fr var(--footer-h); }
.profile { grid-column: 4; grid-row: 1; background: var(--panel); border-left: 1px solid var(--border); }

/* --------- Sidebar --------- */
.sidebar{
  display: flex; flex-direction: column; align-items: center; gap: .75rem;
  padding: 1rem .5rem;
}
.sidebar .logo { font-weight: 800; }
.sidebar nav ul { list-style: none; display: flex; flex-direction: column; gap: 1rem; padding: 0; }
.sidebar nav li{
  width: calc(var(--sidebar-w) - 20px); height: 52px; display: grid; place-items: center;
  border-radius: 12px; cursor: pointer; transition: background .2s ease;
}
.sidebar nav li:hover, .sidebar nav li.active { background: #334155; }
.user-footer{ margin-top: auto; text-align: center; display: grid; place-items: center; gap: .5rem; padding-bottom: .25rem; }
.user-footer .pp{ width: 42px; height: 42px; border-radius: 50%; background:#475569 center/cover no-repeat; }

/* --------- Contacts --------- */
.contacts{ padding: 12px; overflow-y: auto; }
.contacts h2{ font-size: 1.1rem; font-weight: 800; color: #e2e8f0; margin: 4px 6px 10px; }
#discussions-list, .contact-list{ list-style: none; display: flex; flex-direction: column; gap: .35rem; }

/* Carte contact : s'applique à .contact-item, .contact, ou li générique */
.contact-item, .contacts .contact, .contact-list > li{
  display: flex; align-items: center; gap: 12px;
  padding: 10px 12px; margin: 2px 4px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.08);
  cursor: pointer;
  transition: transform .12s ease, background-color .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.contact-item:hover, .contacts .contact:hover, .contact-list > li:hover{
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.16);
  box-shadow: 0 4px 12px rgba(0,0,0,.25);
  transform: translateY(-1px);
}
.contact-item.active, .contacts .contact.active, .contact-list > li.active{
  background: linear-gradient(135deg, #1e3a8a, #1d4ed8);
  border-color: rgba(59,130,246,.55);
  box-shadow: 0 0 0 2px rgba(59,130,246,.25) inset;
}

/* Avatar + statut */
.contact-item .pp, .contacts .contact .pp, .contact-list > li .pp{
  width: 40px; height: 40px; border-radius: 50%;
  background:#2e2e35 center/cover no-repeat; flex-shrink: 0; position: relative;
}
.status{ position: absolute; right: -1px; bottom: -1px; width: 10px; height: 10px; border-radius: 50%; border: 2px solid var(--panel); background:#6b7280; }
.status.online{ background: var(--success); }

/* Meta texte */
.meta{ min-width: 0; flex: 1; }
.name{ font-weight: 700; color:#e5e7eb; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height:1.2; }
.preview{ font-size:.82rem; color:#9ca3af; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Droite : heure + badge */
.end{ display:flex; flex-direction:column; align-items:flex-end; gap:6px; }
.time{ font-size:.73rem; color:#6b7280; }
.badge{ background:#10b981; color:#fff; font-size:.7rem; font-weight:700; line-height:1; border-radius:999px; padding:4px 8px; min-width:20px; text-align:center; }

/* --------- Chat --------- */
/* Header */
.chat-header{
  display:flex; align-items:center; justify-content:space-between; padding: 0 16px;
  border-bottom: 1px solid var(--border); background: var(--panel-2);
}
.chat-header .peer{ display:flex; align-items:center; gap:.75rem; }
.chat-header .peer .pp{ width: 46px; height: 46px; border-radius:50%; background:#475569 center/cover; }
.chat-header .name{ font-weight: 800; }
.chat-header .sub{ color: var(--muted); font-size: .9rem; }

/* Body */
.chat-body{
  overflow-y: auto; padding: 14px 18px;
  display: flex; flex-direction: column; gap: .6rem;
}

/* Message (structure utilisée par ton HTML) */
.chat-message{ display: flex; align-items: flex-start; gap: .6rem; }
.pp-message{ width: 30px; height: 30px; border-radius: 50%; background: center/cover no-repeat; flex-shrink: 0; }
.text-block{ display: flex; flex-direction: column; max-width: 75%; min-width: 0; }
.sender-line{ font-weight: 700; font-size: .9rem; color: #cbd5e1; margin-bottom: 2px; }
.content-line{
  background: linear-gradient(135deg, #1f2937, #374151);
  color: #fff; padding: .55rem .9rem; border-radius: 12px; line-height: 1.45; word-wrap: break-word;
}
/* variantes si tu ajoutes .me / .other sur .chat-message */
.chat-message.me .content-line{ background: linear-gradient(135deg, var(--brand), #1e40af); }
.chat-message.other .content-line{ background: linear-gradient(135deg, #1f2937, #374151); }

/* Footer */
.chat-footer{
  border-top: 1px solid var(--border); background: var(--panel-2);
  padding: 10px 12px; display: flex; align-items: center; gap: .5rem;
}
.input-wrapper{ flex: 1; display: flex; align-items: center; background: #1e293b; border-radius: 12px; overflow: hidden; border: 1px solid #223042; }
.input-wrapper input{ flex: 1; padding: .9rem 1rem; border: none; outline: none; background: transparent; color: var(--text); }
.input-wrapper button{
  border: none; padding: .9rem 1rem; cursor: pointer; font-weight: 700;
  background: linear-gradient(135deg, #10b981, #059669); color: #fff; transition: filter .2s;
}
.input-wrapper button:hover{ filter: brightness(1.06); }

/* --------- Profil --------- */
.profile{
  padding: 16px; display: flex; flex-direction: column; align-items: center; text-align: center;
}
.profile .pp{ width: 88px; height: 88px; margin: 10px 0; border-radius:50%; background:#475569 center/cover; }
.profile .username{ font-weight: 800; }
.profile .desc{ color: var(--muted); font-size: .95rem; }

/* --------- Effets “glass” doux --------- */
.chat, .contacts, .profile{
  box-shadow: 0 4px 30px rgba(0,0,0,.10);
  backdrop-filter: blur(5px);
  background-color: rgba(30, 41, 59, .75);
  border: 1px solid rgba(255,255,255,.1);
}

/* --------- Responsive --------- */
@media (max-width: 1180px){
  .app-container{ grid-template-columns: var(--sidebar-w) var(--contacts-w) 1fr; }
  .profile{ display: none; }
}
@media (max-width: 820px){
  .app-container{ grid-template-columns: var(--sidebar-w) 1fr; }
  .contacts{ display: none; }
}
