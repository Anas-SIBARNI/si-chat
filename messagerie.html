<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nouvelle Messagerie</title>
  <link rel="stylesheet" href="css/css.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Ajout minimal pour garantir la visibilit√© de la barre d'envoi */
    .chat { display: flex; flex-direction: column; }
    .chat-body { flex: 1; overflow-y: auto; }
    .chat-footer { border-top: 1px solid #334155; padding: 1rem; }
    .chat-footer .input-wrapper { display: flex; gap: .75rem; align-items: center; }
    .chat-footer input { flex: 1; }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">üí¨</div>
      <nav>
        <ul>
          <li class="active" onclick="switchTab('messages')"><i class="fa fa-comments"></i> Messages</li>
          <li onclick="switchTab('groups')"><i class="fa fa-users"></i> Groupes</li>
          <li onclick="showContactSection()"><i class="fa fa-user-friends"></i> Contacts</li>
          <li onclick="window.location.href='parametres.html'"><i class="fa fa-cog"></i> Param√®tres</li>
        </ul>
      </nav>
      <div class="user-footer">
        <img class="pp" src="img/default.jpg" alt="pp" />
        <span id="username">Anas</span>
        <button class="settings-btn" onclick="window.location.href='parametres.html'">‚öôÔ∏è</button>
      </div>
    </aside>

    <!-- Liste de contacts -->
    <section class="contacts" id="contact-section">
      <h2>Discussions</h2>
      <div id="discussions-list"></div>
    </section>

    <!-- Chat principal -->
    <main class="chat chat-area" id="chat-area">

      <header class="chat-header">
        <h3 id="chat-user">Discussion priv√©e la plus r√©cente</h3>
      </header>
      <div class="chat-body" id="chat-body"></div>
      
      <!-- Footer transform√© en formulaire -->
      <form class="chat-footer" id="chat-form" autocomplete="off">
        <div class="input-wrapper">
          <input type="text" id="message-input" placeholder="√âcris ton message..." autocomplete="off">
          <button type="submit" id="send-btn"><i class="fa fa-paper-plane"></i></button>
        </div>
      </form>
    </main>
    <style>
      /* Hotfix : conserver la barre d‚Äôenvoi visible */
      #chat-area { display: flex; flex-direction: column; height: 100vh; }
      #chat-body { flex: 1; overflow-y: auto; }
      .chat-footer { border-top: 1px solid #333; }

    </style>

    <!-- Profil √† droite -->
    <aside class="profile" id="contact-profile">
      <div class="pp large"></div>
      <h4 id="profile-name">Sarah</h4>
      <p id="profile-description">Description : Amie proche</p>
      <p>En ligne</p>
    </aside>
  </div>

  <!-- Scripts (ancien ordre pour compatibilit√©) -->
  <script src="scripts/auth.js"></script>
  <script src="scripts/contacts.js"></script>
  <script src="scripts/groups.js"></script>
  <script src="scripts/ui.js"></script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="scripts/main.js"></script>
</body>
</html>
