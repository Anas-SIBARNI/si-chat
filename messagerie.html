<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Messagerie</title>
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <div class="app-container">
<!-- Sidebar -->
<aside class="sidebar">
  <div class="sidebar__logo">
    <img src="img/bulles3D.png" alt="Logo">
  </div>

  <nav class="sidebar__nav">
    <ul>
      <li id="nav-discussions" class="active"><a href="#" data-label="Discussions"><span class="btn-label">D</span></a></li>
      <li id="nav-groups"><a href="#" data-label="Groupes"><span class="btn-label">G</span></a></li>
      <li id="nav-friends"><a href="#" data-label="Contacts"><span class="btn-label">C</span></a></li>
    </ul>
  </nav>
  
  
  

  <a href="parametres.html" class="sidebar__user">
    <div class="pp" style="background-image:url('img/default.jpg')"></div>
    <span id="username">Username</span>
  </a>
</aside>





    <style>
      .sidebar nav ul li a[href="parametres.html"]:visited { color: inherit; }
    </style>
    
    <!-- Discussions privées -->
    <section class="contacts" id="discussions-section">
      <h2>Discussions</h2>
      <div id="discussions-list"></div>
    </section>

    <!-- Groupes -->
    <section class="contacts" id="group-section" style="display:none;">
      <h2>Groupes</h2>
      <div id="user-groups-list"></div>
    </section>

    <!-- Chat -->
    <main class="chat messagerie-" id="chat-area">
      <header class="chat-header">
        <div class="peer">
          <!-- (fix) chemin image -->
          <div class="pp" style="background-image:url('img/default.jpg')"></div>
        </div>
      </header>

      <div class="chat-body" id="chat-body"></div>

      <form class="chat-footer" id="chat-form" autocomplete="off">
        <div class="input-wrapper">
          <input type="text" id="message-input" placeholder="Écris ton message..." autocomplete="off">
          <button type="submit" id="send-btn"><i class="fa fa-paper-plane"></i></button>
        </div>
      </form>

      <!-- SECTION CONTACTS CONTACTc(MASQUÉE PAR DÉFAUT) -->
      <section id="contacts-section" class="hidden" aria-label="Contacts" style="display:none;">
        <div class="tabs">
          <div class="nav">
            <button id="tab-online"  class="active" onclick="switchTab('online')">En ligne</button>
            <button id="tab-all"                 onclick="switchTab('all')">Tous</button>
            <button id="tab-pending"             onclick="switchTab('pending')">En attente</button>
            <button id="tab-add"                 onclick="switchTab('add')">Ajouter</button>
            <button id="tab-groups"              onclick="switchTab('groups')">Groupes</button>
          </div>
        </div>

        <div id="tab-content">
          <!-- Contenu injecté par switchTab(tab) -->
        </div>
      </section>


      
    </main>

    
      <!-- Panneau fiche profil (droite) -->
      <aside id="profile-panel" class="profile-panel" aria-label="Fiche profil de l'interlocuteur">
        <div id="profile-card">
          <div class="pp" id="profile-pp" style="width:72px;height:72px;border-radius:50%;background:#ddd;background-size:cover;background-position:center;"></div>
          <h3 id="profile-name" style="margin:12px 0 4px 0;">@username</h3>
          <p id="profile-description" style="margin:0;color:#555;">Aucune description</p>
        </div>
      </aside>


  </div>

  <script>
    window.API_BASE = "/api";
    window.API = window.API_BASE; // compat pour du code qui utilise "API"
  </script>
  
  <script src="/socket.io/socket.io.js"></script>

  <script src="scripts/socket.js?v=2"></script>
  <script src="scripts/discussions.js?v=2"></script>
  <script src="scripts/contacts.js?v=2"></script>
  <script src="scripts/groups.js?v=2"></script>
  <script src="scripts/navigation.js?v=2"></script>
  <script src="scripts/ui.js?v=2"></script>
  <script src="scripts/parametres.js?v=2"></script>
  <script src="scripts/tabs.js?v=2"></script>
  
  <script src="scripts/main.js?v=2"></script>
  
  


</body>
</html>
